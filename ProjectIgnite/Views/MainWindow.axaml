<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:ProjectIgnite.ViewModels"
        xmlns:models="using:ProjectIgnite.Models"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
        x:Class="ProjectIgnite.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="ProjectIgnite"
        MinWidth="800" MinHeight="600">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Window.Styles>
        <!-- å¯¼èˆªèœå•é¡¹æ ·å¼ -->
        <Style Selector="ListBoxItem">
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Margin" Value="4,2"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Background" Value="Transparent"/>
        </Style>
        
        <Style Selector="ListBoxItem:selected">
            <Setter Property="Background" Value="{DynamicResource SystemAccentColor}"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        
        <Style Selector="ListBoxItem:pointerover">
            <Setter Property="Background" Value="{DynamicResource SystemControlHighlightListLowBrush}"/>
        </Style>

        <!-- å·¥å…·æ æŒ‰é’®æ ·å¼ -->
        <Style Selector="Button.ToolbarButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="Margin" Value="4,0"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>
        
        <Style Selector="Button.ToolbarButton:pointerover">
            <Setter Property="Background" Value="{DynamicResource SystemControlHighlightListLowBrush}"/>
        </Style>

        <!-- æ—¥å¿—æ¶ˆæ¯æ ·å¼ -->
        <Style Selector="TextBlock.LogMessage">
            <Setter Property="FontFamily" Value="Consolas, 'Courier New', monospace"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="2,1"/>
        </Style>
        
        <Style Selector="TextBlock.LogMessage.Info">
            <Setter Property="Foreground" Value="{DynamicResource SystemBaseHighColor}"/>
        </Style>
        
        <Style Selector="TextBlock.LogMessage.Warning">
            <Setter Property="Foreground" Value="Orange"/>
        </Style>
        
        <Style Selector="TextBlock.LogMessage.Error">
            <Setter Property="Foreground" Value="Red"/>
        </Style>
        
        <Style Selector="TextBlock.LogMessage.Debug">
            <Setter Property="Foreground" Value="Gray"/>
        </Style>
    </Window.Styles>

    <Grid>
        <Grid.RowDefinitions>
            <!-- é¡¶éƒ¨å·¥å…·æ  -->
            <RowDefinition Height="Auto"/>
            <!-- ä¸»å†…å®¹åŒºåŸŸ -->
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- é¡¶éƒ¨å·¥å…·æ  -->
        <Border Grid.Row="0" Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                BorderThickness="0,0,0,1" Padding="16,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- é¡µé¢æ ‡é¢˜ -->
                <TextBlock Grid.Column="0" Text="{Binding CurrentPageTitle}" 
                          FontSize="18" FontWeight="SemiBold"
                          VerticalAlignment="Center"/>

                <!-- å·¥å…·æ æŒ‰é’® -->
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
                    <Button Classes="ToolbarButton" Command="{Binding ToggleThemeCommand}"
                            ToolTip.Tip="åˆ‡æ¢ä¸»é¢˜">
                        <TextBlock Text="ðŸŒ™" FontSize="16"/>
                    </Button>
                    

                </StackPanel>
            </Grid>
        </Border>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <!-- å·¦ä¾§å¯¼èˆªèœå• -->
                <ColumnDefinition Width="250"/>
                <!-- åˆ†éš”çº¿ -->
                <ColumnDefinition Width="Auto"/>
                <!-- ä¸»å†…å®¹åŒºåŸŸ -->
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- å·¦ä¾§å¯¼èˆªèœå• -->
            <Border Grid.Column="0" Classes="NavigationPanel">
                <ScrollViewer>
                    <StackPanel>
                        <!-- å¯¼èˆªæ ‡é¢˜ -->
                        <TextBlock Text="Navigation" Classes="NavigationTitle"/>
                        
                        <!-- å¯¼èˆªèœå•é¡¹ -->
                        <ListBox ItemsSource="{Binding NavigationItems}"
                                SelectedItem="{Binding SelectedNavigationItem}"
                                Classes="NavigationList">
                            <ListBox.ItemTemplate>
                                <DataTemplate x:DataType="models:NavigationItem">
                                    <Button Classes="NavigationItem"
                                           Classes.Selected="{Binding IsSelected}"
                                           Command="{Binding NavigateCommand}"
                                           CommandParameter="{Binding}">
                                        <StackPanel Classes="NavigationItemContent">
                                            <TextBlock Text="{Binding Icon}" Classes="NavigationIcon"/>
                                            <TextBlock Text="{Binding Title}" Classes="NavigationText"/>
                                        </StackPanel>
                                    </Button>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- åˆ†éš”çº¿ -->
            <GridSplitter Grid.Column="1" Width="4" Background="Transparent"
                         ResizeDirection="Columns" HorizontalAlignment="Center"/>

            <!-- ä¸»å†…å®¹åŒºåŸŸ -->
            <Border Grid.Column="2" Margin="20" Background="White"
                   CornerRadius="8" BoxShadow="0 2 8 0 #20000000">
                <Grid>
                    <!-- é»˜è®¤å†…å®¹ -->
                    <ContentPresenter Content="{Binding CurrentContent}"
                                     IsVisible="{Binding CurrentContentType, Converter={x:Static ObjectConverters.NotEqual}, ConverterParameter=Logs}"/>
                    
                    <!-- æ—¥å¿—æ˜¾ç¤ºå†…å®¹ -->
                    <Grid IsVisible="{Binding CurrentContentType, Converter={x:Static ObjectConverters.Equal}, ConverterParameter=Logs}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- æ—¥å¿—æ ‡é¢˜æ  -->
                        <Grid Grid.Row="0" Margin="20,20,20,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="æ—¥å¿—è¾“å‡º" FontWeight="SemiBold" FontSize="18"
                                      VerticalAlignment="Center"/>

                            <Button Grid.Column="1" Classes="ToolbarButton" Command="{Binding ClearLogsCommand}"
                                   ToolTip.Tip="æ¸…ç©ºæ—¥å¿—">
                                <TextBlock Text="ðŸ—‘ï¸" FontSize="16"/>
                            </Button>
                        </Grid>

                        <!-- æ—¥å¿—å†…å®¹ -->
                        <ScrollViewer Grid.Row="1" Margin="20,0,20,20">
                            <ItemsControl ItemsSource="{Binding LogMessages}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="models:LogMessage">
                                        <TextBlock Text="{Binding FormattedMessage}"
                                                  Classes="LogMessage"
                                                  Classes.Info="{Binding Level, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static models:LogLevel.Info}}"
                                                  Classes.Warning="{Binding Level, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static models:LogLevel.Warning}}"
                                                  Classes.Error="{Binding Level, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static models:LogLevel.Error}}"
                                                  Classes.Debug="{Binding Level, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static models:LogLevel.Debug}}"
                                                  TextWrapping="Wrap" Margin="0,2"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Grid>
            </Border>
        </Grid>


    </Grid>

</Window>
